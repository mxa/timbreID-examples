#N canvas 18 551 628 412 10;
#X declare -path ./abstractions;
#X declare -lib hcs;
#X obj 39 338 hsl 128 16 40 100 0 0 \$0-master-volume master-volume-set
master-volume 2 8 0 12 -262144 -1 -1 12700 0;
#N canvas 587 43 724 484 players 0;
#X obj 311 235 dac~;
#X obj 311 211 *~;
#X obj 421 121 dbtorms;
#X obj 421 142 pack f 40;
#X obj 421 163 line~;
#X obj 421 52 moses 41;
#X obj 421 74 t b;
#X msg 421 96 0;
#X obj 311 27 catch~ grain-bus;
#N canvas 0 22 730 457 set-sample-and-grain 0;
#X obj 251 208 tabread frame-locations;
#X obj 54 396 outlet;
#X obj 273 248 s current-playback-sample;
#X obj 73 209 s current-playback-frame;
#X obj 54 247 tabread frame-start-samp;
#X obj 54 9 r \$0-trig-sound;
#X obj 54 75 t f f f;
#X obj 54 42 unpack f f;
#X obj 448 253 + 1;
#X obj 448 230 * -1;
#X obj 448 209 / 5;
#X obj 54 366 pack f f f;
#X text 495 204 distance = volume;
#X obj 464 151 r \$0-mouse-radius;
#X connect 0 0 2 0;
#X connect 0 0 11 1;
#X connect 4 0 11 0;
#X connect 5 0 7 0;
#X connect 6 0 4 0;
#X connect 6 1 3 0;
#X connect 6 2 0 0;
#X connect 7 0 6 0;
#X connect 7 1 10 0;
#X connect 8 0 11 2;
#X connect 9 0 8 0;
#X connect 10 0 9 0;
#X connect 11 0 1 0;
#X connect 13 0 10 1;
#X restore 27 32 pd set-sample-and-grain;
#X obj 27 63 t b l;
#X obj 27 126 list append;
#X obj 26 274 grain-player-unit 0;
#N canvas 715 154 253 127 modding 0;
#X obj 27 23 inlet;
#X obj 104 22 r num-player-voices;
#X obj 27 73 outlet;
#X obj 56 49 + 1;
#X obj 27 49 f;
#X obj 83 49 % 32;
#X connect 0 0 4 0;
#X connect 1 0 5 1;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 4 0 2 0;
#X connect 5 0 4 1;
#X restore 27 94 pd modding;
#X msg 27 148 \; play-\$1 \$2 \$3 \$4 \;;
#X obj 421 30 r \$0-master-volume;
#N canvas 1032 615 498 306 hann 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array hann 512 float 1;
#A 0 0 3.76403e-05 0.000150591 0.000338793 0.000602275 0.000940919
0.00135475 0.00184369 0.00240761 0.00304651 0.00376022 0.00454867 0.00541171
0.00634927 0.00736114 0.00844723 0.00960734 0.0108413 0.0121489 0.01353
0.0149843 0.0165117 0.0181119 0.0197847 0.0215298 0.0233469 0.0252359
0.0271963 0.0292279 0.0313304 0.0335035 0.0357469 0.0380602 0.040443
0.042895 0.0454159 0.0480052 0.0506626 0.0533877 0.05618 0.0590392
0.0619648 0.0649563 0.0680134 0.0711355 0.0743222 0.077573 0.0808874
0.084265 0.0877051 0.0912073 0.0947711 0.0983959 0.102081 0.105826
0.109631 0.113494 0.117416 0.121395 0.125431 0.129524 0.133672 0.137876
0.142134 0.146446 0.150811 0.155229 0.159699 0.16422 0.168792 0.173413
0.178084 0.182803 0.18757 0.192384 0.197244 0.20215 0.2071 0.212095
0.217133 0.222214 0.227337 0.2325 0.237704 0.242948 0.24823 0.25355
0.258907 0.264301 0.26973 0.275194 0.280691 0.286222 0.291785 0.297379
0.303003 0.308658 0.314341 0.320052 0.32579 0.331555 0.337344 0.343159
0.348997 0.354857 0.36074 0.366643 0.372567 0.37851 0.384471 0.390449
0.396444 0.402455 0.40848 0.414519 0.420571 0.426635 0.432709 0.438794
0.444889 0.450991 0.457101 0.463218 0.46934 0.475466 0.481596 0.487729
0.493864 0.5 0.506136 0.512271 0.518404 0.524534 0.53066 0.536782 0.542899
0.549009 0.555111 0.561205 0.56729 0.573365 0.579429 0.585481 0.59152
0.597545 0.603556 0.609551 0.615529 0.62149 0.627433 0.633357 0.63926
0.645143 0.651003 0.656841 0.662656 0.668445 0.67421 0.679948 0.685659
0.691342 0.696997 0.702621 0.708215 0.713778 0.719309 0.724806 0.73027
0.735699 0.741093 0.74645 0.75177 0.757052 0.762295 0.767499 0.772663
0.777786 0.782867 0.787905 0.7929 0.79785 0.802756 0.807616 0.812431
0.817197 0.821916 0.826587 0.831209 0.83578 0.840301 0.844771 0.849189
0.853554 0.857866 0.862124 0.866328 0.870476 0.874569 0.878605 0.882584
0.886506 0.890369 0.894174 0.897919 0.901605 0.905229 0.908793 0.912295
0.915736 0.919113 0.922428 0.925678 0.928865 0.931987 0.935044 0.938036
0.940961 0.94382 0.946613 0.949338 0.951995 0.954585 0.957106 0.959558
0.96194 0.964254 0.966497 0.96867 0.970773 0.972804 0.974765 0.976654
0.978471 0.980216 0.981889 0.983489 0.985016 0.98647 0.987852 0.989159
0.990393 0.991553 0.992639 0.993651 0.994589 0.995452 0.99624 0.996954
0.997593 0.998156 0.998645 0.999059 0.999398 0.999661 0.999849 0.999962
1 0.999962 0.999849 0.999661 0.999398 0.999059 0.998645 0.998156 0.997592
0.996953 0.996239 0.995451 0.994588 0.99365 0.992638 0.991552 0.990392
0.989158 0.987851 0.986469 0.985015 0.983488 0.981887 0.980215 0.978469
0.976652 0.974763 0.972803 0.970771 0.968669 0.966495 0.964252 0.961939
0.959556 0.957104 0.954583 0.951993 0.949336 0.946611 0.943818 0.940959
0.938034 0.935042 0.931985 0.928863 0.925676 0.922425 0.919111 0.915733
0.912293 0.908791 0.905227 0.901602 0.897917 0.894171 0.890367 0.886503
0.882582 0.878602 0.874566 0.870473 0.866325 0.862121 0.857863 0.853551
0.849186 0.844768 0.840298 0.835777 0.831205 0.826584 0.821913 0.817194
0.812427 0.807613 0.802753 0.797847 0.792896 0.787901 0.782863 0.777782
0.77266 0.767496 0.762292 0.757048 0.751766 0.746446 0.741089 0.735695
0.730266 0.724802 0.719305 0.713774 0.708211 0.702617 0.696993 0.691338
0.685655 0.679944 0.674206 0.668441 0.662652 0.656837 0.650999 0.645139
0.639256 0.633353 0.627429 0.621486 0.615525 0.609547 0.603552 0.597541
0.591516 0.585477 0.579425 0.573361 0.567286 0.561201 0.555107 0.549004
0.542894 0.536778 0.530656 0.52453 0.518399 0.512266 0.506131 0.499996
0.49386 0.487725 0.481592 0.475462 0.469335 0.463213 0.457097 0.450987
0.444884 0.43879 0.432705 0.42663 0.420566 0.414515 0.408476 0.40245
0.39644 0.390445 0.384466 0.378505 0.372563 0.366639 0.360736 0.354853
0.348993 0.343155 0.33734 0.331551 0.325786 0.320048 0.314337 0.308654
0.302999 0.297375 0.291781 0.286218 0.280687 0.27519 0.269726 0.264297
0.258904 0.253547 0.248226 0.242944 0.237701 0.232497 0.227333 0.222211
0.21713 0.212092 0.207097 0.202146 0.19724 0.19238 0.187566 0.182799
0.17808 0.17341 0.168788 0.164217 0.159696 0.155226 0.150808 0.146443
0.142131 0.137873 0.133669 0.129521 0.125428 0.121392 0.117413 0.113491
0.109628 0.105823 0.102078 0.0983929 0.0947681 0.0912043 0.0877022
0.084262 0.0808845 0.0775702 0.0743194 0.0711327 0.0680107 0.0649537
0.0619622 0.0590366 0.0561775 0.0533852 0.0506602 0.0480028 0.0454136
0.0428927 0.0404407 0.038058 0.0357448 0.0335014 0.0313284 0.0292259
0.0271944 0.025234 0.0233451 0.0215281 0.019783 0.0181103 0.0165102
0.0149829 0.0135286 0.0121476 0.01084 0.00960612 0.0084461 0.0073601
0.00634828 0.00541082 0.00454783 0.00375944 0.0030458 0.00240701 0.00184312
0.00135428 0.000940531 0.000601947 0.000338554 0.000150412 3.75509e-05
;
#X coords 0 1 511 0 200 120 1 0 0;
#X restore 259 62 graph;
#X msg 137 76 0;
#X obj 31 125 osc~;
#X obj 31 77 samplerate~;
#X obj 31 148 *~ -0.5;
#X obj 31 171 +~ 0.5;
#X text 245 54 1;
#X text 238 172 0;
#X text 254 185 0;
#X obj 31 101 / 512;
#X obj 23 54 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 302 34 Hann window;
#X text 79 123 period 512;
#X obj 23 26 loadbang;
#X text 56 44;
#X text 48 48 recalculate Hann window table;
#X obj 23 196 tabwrite~ hann;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 9 0;
#X connect 4 0 5 0;
#X connect 5 0 16 0;
#X connect 9 0 2 0;
#X connect 10 0 3 0;
#X connect 10 0 1 0;
#X connect 10 0 16 0;
#X connect 13 0 10 0;
#X restore 543 105 pd hann;
#X obj 546 274 grain-player-unit 24;
#X obj 196 294 grain-player-unit 9;
#X obj 26 294 grain-player-unit 1;
#X obj 26 314 grain-player-unit 2;
#X obj 26 334 grain-player-unit 3;
#X obj 26 354 grain-player-unit 4;
#X obj 26 374 grain-player-unit 5;
#X obj 26 394 grain-player-unit 6;
#X obj 26 414 grain-player-unit 7;
#X obj 196 274 grain-player-unit 8;
#X obj 196 314 grain-player-unit 10;
#X obj 196 334 grain-player-unit 11;
#X obj 196 354 grain-player-unit 12;
#X obj 196 374 grain-player-unit 13;
#X obj 196 394 grain-player-unit 14;
#X obj 196 414 grain-player-unit 15;
#X obj 376 274 grain-player-unit 16;
#X obj 376 294 grain-player-unit 17;
#X obj 376 314 grain-player-unit 18;
#X obj 376 334 grain-player-unit 19;
#X obj 376 354 grain-player-unit 20;
#X obj 376 374 grain-player-unit 21;
#X obj 376 394 grain-player-unit 22;
#X obj 376 414 grain-player-unit 23;
#X obj 546 294 grain-player-unit 25;
#X obj 546 314 grain-player-unit 26;
#X obj 546 334 grain-player-unit 27;
#X obj 546 354 grain-player-unit 28;
#X obj 546 374 grain-player-unit 29;
#X obj 546 394 grain-player-unit 30;
#X obj 546 414 grain-player-unit 31;
#X connect 1 0 0 1;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X connect 5 0 6 0;
#X connect 5 1 2 0;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 8 0 1 0;
#X connect 9 0 10 0;
#X connect 10 0 13 0;
#X connect 10 1 11 1;
#X connect 11 0 14 0;
#X connect 13 0 11 0;
#X connect 15 0 5 0;
#X restore 36 85 pd players;
#X obj 37 175 bng 16 250 50 0 \$0-render-plot empty Plot 20 8 0 12
-203904 -1 -1;
#X obj 39 256 hsl 128 16 0.05 2.7 0 0 \$0-mouse-radius mouse-radius-set
mouse-radius 2 8 0 12 -262144 -1 -1 4600 0;
#X obj 37 213 tgl 16 0 \$0-kinect-on kinect-on-set Kinect-via-Synapse
20 8 0 12 -262144 -1 -1 1 1;
#X obj 39 275 hsl 128 16 0.03 0.25 0 0 \$0-point-size empty point-size
2 8 0 12 -262144 -1 -1 1000 0;
#N canvas 511 22 320 203 timbreID 0;
#X msg 227 93 clear;
#X obj 22 23 r \$0-tID;
#X msg 200 43 read \$1;
#X obj 200 139 s \$0-tID;
#X floatatom 22 138 5 0 0 0 - - -;
#X obj 200 65 t a b;
#X obj 22 95 tID/timbreID;
#X obj 200 22 r \$0-load-timid;
#X obj 91 139 s feature-list;
#X connect 0 0 3 0;
#X connect 1 0 6 0;
#X connect 2 0 5 0;
#X connect 5 0 3 0;
#X connect 5 1 0 0;
#X connect 6 0 4 0;
#X connect 6 4 8 0;
#X connect 7 0 2 0;
#X restore 36 65 pd timbreID;
#X obj 11 1 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 1 1 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 902 458 426 470 init 0;
#X obj 13 17 loadbang;
#X msg 13 408 \; pd dsp 1 \;;
#X obj 87 110 s lb1;
#X obj 72 134 s lb2;
#X obj 57 158 s lb3;
#X obj 231 14 declare -path ./abstractions;
#X obj 231 37 declare -lib hcs;
#X msg 42 181 0;
#X obj 42 203 s \$0-continuous-set;
#X msg 27 229 \; db-thresh 0 \; x-mapping-set 12 \; y-mapping-set 3
\; z-mapping-set 9 \; R-mapping-set 13 \; G-mapping-set 14 \; B-mapping-set
15 \; num-player-voices 32 \; mouse-radius-set 2 \; max-sample-length
1.411e+07 \; master-volume-set 90 \;;
#X obj 100 61 samplerate~;
#X obj 13 38 t b b b b b b b;
#X obj 100 83 s samplerate;
#X connect 0 0 11 0;
#X connect 7 0 8 0;
#X connect 10 0 12 0;
#X connect 11 0 1 0;
#X connect 11 1 9 0;
#X connect 11 2 7 0;
#X connect 11 3 4 0;
#X connect 11 4 3 0;
#X connect 11 5 2 0;
#X connect 11 6 10 0;
#X restore 36 45 pd init;
#X obj 183 36 cnv 15 256 30 empty empty empty 20 12 0 14 -261234 -66577
0;
#N canvas 671 324 881 633 analysis 0;
#X obj 31 109 s window-size;
#X obj 98 482 bng 15 250 50 0 empty empty empty 17 7 0 10 -258113 -1
-1;
#X obj 35 412 bng 15 250 50 0 empty empty empty 17 7 0 10 -4034 -1
-1;
#N canvas 658 22 835 602 analysis 0;
#X obj 575 36 cnv 15 200 30 empty empty empty 20 12 0 14 -261234 -66577
0;
#X text 585 42 Write analysis file;
#X obj 575 88 inlet;
#N canvas 176 224 833 330 multiple 0;
#X text 381 -84 Features used here are:;
#X obj 66 -142 inlet;
#N canvas 557 316 865 644 feature-0-2 0;
#X obj 201 56 inlet;
#X obj 189 560 outlet;
#X obj 491 315 list append;
#X obj 189 459 list append;
#X obj 320 274 f;
#X obj 350 274 + 1;
#X msg 335 239 0;
#X obj 491 80 r samplerate;
#X msg 491 101 samplerate \$1;
#X obj 591 80 r current-analysis-sample;
#X msg 591 101 set tID-sample-\$1;
#X obj 320 365 list append;
#X obj 84 402 f;
#X obj 99 379 r current-analysis-sample;
#X obj 201 106 t b b a;
#X obj 583 247 inlet;
#X obj 491 154 tID/specBrightness tID-sample-0 1200;
#X obj 334 218 r \$0-reset-instance-count;
#X connect 0 0 14 0;
#X connect 2 0 11 1;
#X connect 3 0 1 0;
#X connect 4 0 5 0;
#X connect 4 0 11 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 0;
#X connect 8 0 16 0;
#X connect 9 0 10 0;
#X connect 10 0 16 0;
#X connect 11 0 3 1;
#X connect 12 0 3 0;
#X connect 13 0 12 1;
#X connect 14 0 12 0;
#X connect 14 1 4 0;
#X connect 14 2 16 0;
#X connect 15 0 2 1;
#X connect 16 0 2 0;
#X connect 17 0 6 0;
#X restore 53 93 pd feature-0-2;
#N canvas 0 22 1159 470 features-3-6 0;
#X obj 66 48 inlet;
#X obj 584 263 list append;
#X obj 46 363 list append;
#X obj 400 293 list append;
#X obj 775 164 r samplerate;
#X msg 775 185 samplerate \$1;
#X obj 230 323 list append;
#X obj 875 164 r current-analysis-sample;
#X msg 875 185 set tID-sample-\$1;
#X obj 66 78 t a a a a;
#X obj 46 385 outlet;
#X obj 647 233 inlet;
#X obj 584 202 tID/specIrregularity tID-sample-0;
#X obj 400 202 tID/specFlux tID-sample-0 256;
#X obj 230 202 tID/specFlatness tID-sample-0;
#X obj 46 202 tID/specCentroid tID-sample-0;
#X connect 0 0 9 0;
#X connect 1 0 3 1;
#X connect 2 0 10 0;
#X connect 3 0 6 1;
#X connect 4 0 5 0;
#X connect 5 0 12 0;
#X connect 5 0 13 0;
#X connect 5 0 15 0;
#X connect 6 0 2 1;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 8 0 15 0;
#X connect 9 0 15 0;
#X connect 9 1 14 0;
#X connect 9 2 13 0;
#X connect 9 3 12 0;
#X connect 11 0 1 1;
#X connect 12 0 1 0;
#X connect 13 0 3 0;
#X connect 14 0 6 0;
#X connect 15 0 2 0;
#X restore 99 35 pd features-3-6;
#X obj 53 130 outlet;
#X text 381 -54 0: sample number;
#X text 381 -34 1: frame number;
#X text 381 -14 2: brightness;
#X text 381 6 3: centroid;
#X text 381 26 4: flatness;
#X text 381 46 5: flux;
#X text 381 66 6: irregularity;
#X text 541 -54 7: kurtosis;
#X text 541 -34 8: skewness;
#X text 541 -14 9: spread;
#X text 541 6 10: zero crossing;
#X text 541 26 11: pitch;
#X text 541 46 12: amplitude;
#X text 541 66 13-58: BFCCs 1-46 (we dropped BFCC 0);
#X obj 66 -121 t a a a a;
#N canvas 0 22 978 430 features-7-9 0;
#X obj 56 301 list append;
#X obj 226 43 t a a a;
#X obj 56 323 outlet;
#X obj 226 23 inlet;
#X obj 531 238 inlet;
#X obj 246 261 list append;
#X obj 426 221 list append;
#X obj 646 162 r samplerate;
#X msg 646 183 samplerate \$1;
#X obj 756 162 r current-analysis-sample;
#X msg 756 183 set tID-sample-\$1;
#X obj 426 200 tID/specSpread tID-sample-0;
#X obj 246 200 tID/specSkewness tID-sample-0;
#X obj 56 200 tID/specKurtosis tID-sample-0;
#X connect 0 0 2 0;
#X connect 1 0 13 0;
#X connect 1 1 12 0;
#X connect 1 2 11 0;
#X connect 3 0 1 0;
#X connect 4 0 6 1;
#X connect 5 0 0 1;
#X connect 6 0 5 1;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 8 0 12 0;
#X connect 8 0 13 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 10 0 12 0;
#X connect 10 0 13 0;
#X connect 11 0 6 0;
#X connect 12 0 5 0;
#X connect 13 0 0 0;
#X restore 160 -6 pd features-7-9;
#N canvas 31 52 1019 569 features-10-58 0;
#X obj 422 -26 inlet;
#X obj 673 221 list split 1;
#X obj 267 361 list append;
#X obj 457 311 list append;
#X obj 580 271 list append;
#X obj 267 401 outlet;
#X obj 732 121 r samplerate;
#X msg 732 142 samplerate \$1;
#X obj 832 121 r current-analysis-sample;
#X msg 832 142 set tID-sample-\$1;
#N canvas 654 79 591 435 sigmund-pitch-env 0;
#X obj 76 272 moses 21;
#X obj 76 293 t b;
#X msg 76 313 20;
#X obj 76 241 sigmund~ -t pitch env;
#X obj 42 104 list split 1;
#X obj 76 172 list append;
#X obj 165 83 r current-analysis-sample;
#X obj 165 135 pack f f;
#X obj 210 111 r samplerate;
#X obj 76 359 outlet;
#X obj 199 319 outlet;
#X obj 42 37 inlet;
#X msg 76 198 list tID-sample-\$3 \$2 \$1 \$4 0;
#X connect 0 0 1 0;
#X connect 0 1 9 0;
#X connect 1 0 2 0;
#X connect 2 0 9 0;
#X connect 3 0 0 0;
#X connect 3 1 10 0;
#X connect 4 1 5 0;
#X connect 5 0 12 0;
#X connect 6 0 7 0;
#X connect 7 0 5 1;
#X connect 8 0 7 1;
#X connect 11 0 4 0;
#X connect 12 0 3 0;
#X restore 457 232 pd sigmund-pitch-env;
#X obj 136 164 r current-analysis-sample;
#X msg 136 185 set tID-sample-\$1;
#X obj 422 20 t a a a;
#X obj 267 300 tID/zeroCrossing tID-sample-0;
#X obj 671 200 tID/bfcc tID-sample-0 0.5;
#X connect 0 0 13 0;
#X connect 1 1 4 1;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 4 0 3 1;
#X connect 6 0 7 0;
#X connect 7 0 15 0;
#X connect 8 0 9 0;
#X connect 9 0 15 0;
#X connect 10 0 3 0;
#X connect 10 1 4 0;
#X connect 11 0 12 0;
#X connect 12 0 14 0;
#X connect 13 0 14 0;
#X connect 13 1 10 0;
#X connect 13 2 15 0;
#X connect 14 0 2 0;
#X connect 15 0 1 0;
#X restore 220 -58 pd features-10-58;
#X connect 1 0 19 0;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 19 0 2 0;
#X connect 19 1 3 0;
#X connect 19 2 20 0;
#X connect 19 3 21 0;
#X connect 20 0 3 1;
#X connect 21 0 20 1;
#X restore 114 255 pd multiple analyses;
#X obj 231 348 s \$0-tID;
#X obj 114 424 outlet;
#X msg 90 470 normalize 1;
#X obj 90 491 s \$0-tID;
#X obj 43 46 inlet;
#X text 183 469 Normalize the analysis feature database when finished.
;
#X obj 575 155 s \$0-tID;
#X text 197 106 First \, clear timbreID's memory and reset the instance
counter;
#X obj 152 349 list length;
#X obj 131 374 f;
#N canvas 757 125 460 587 prep-analysis-message 0;
#X obj 27 14 inlet;
#X obj 27 184 f;
#X obj 67 184 + 1;
#X msg 92 138 0;
#X obj 27 314 until;
#X obj 27 371 f;
#X obj 27 130 until;
#X obj 42 46 r num-samples;
#X obj 27 73 f;
#X msg 27 511 analyze \$1 \$2;
#X obj 27 484 pack f f;
#X obj 27 100 t f b;
#X obj 27 207 t f f;
#X obj 72 456 r window-size;
#X obj 54 278 s current-analysis-sample;
#X obj 27 533 outlet;
#X obj 27 244 tabread sample-frames;
#X obj 67 371 + 1;
#X obj 27 413 tabread frame-start-samp;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 1 0 12 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 17 0;
#X connect 5 0 18 0;
#X connect 6 0 1 0;
#X connect 7 0 8 1;
#X connect 8 0 11 0;
#X connect 9 0 15 0;
#X connect 10 0 9 0;
#X connect 11 0 6 0;
#X connect 11 1 3 0;
#X connect 12 0 16 0;
#X connect 12 1 14 0;
#X connect 13 0 10 1;
#X connect 16 0 4 0;
#X connect 17 0 5 1;
#X connect 18 0 10 0;
#X restore 114 220 pd prep-analysis-message;
#X obj 140 180 s \$0-tID;
#X msg 140 159 clear;
#X obj 114 304 t b b l l;
#N canvas 307 105 429 550 store-max-min 0;
#X obj 37 29 inlet;
#X obj 100 98 s \$0-tID;
#X msg 100 77 min_values;
#X obj 84 154 list;
#X obj 84 176 list prepend 0;
#X obj 84 198 s min-values;
#X obj 68 247 s \$0-tID;
#X obj 52 297 list;
#X obj 52 319 list prepend 0;
#X msg 68 226 max_values;
#X obj 52 341 s max-values;
#X obj 37 52 t b b b b b;
#X obj 37 373 s update-bfcc-max-min;
#X obj 73 277 r \$0-feature-list;
#X obj 105 134 r feature-list;
#X connect 0 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 10 0;
#X connect 9 0 6 0;
#X connect 11 0 12 0;
#X connect 11 1 7 0;
#X connect 11 2 9 0;
#X connect 11 3 3 0;
#X connect 11 4 2 0;
#X connect 13 0 7 1;
#X connect 14 0 3 1;
#X restore 43 522 pd store-max-min;
#X obj 43 67 t b b b b b;
#X obj 328 31 inlet;
#X obj 328 53 openpanel;
#X obj 575 110 savepanel;
#X obj 328 75 t b b b b b a;
#X msg 373 181 feature_list 0;
#X obj 373 203 s \$0-tID;
#X obj 373 256 list length;
#X obj 358 280 f;
#X msg 575 132 write \$1;
#X obj 358 301 s \$0-feature-length;
#X obj 131 396 s \$0-feature-length;
#X obj 403 142 s \$0-load-timid;
#X obj 197 142 s \$0-reset-instance-count;
#X obj 373 235 r feature-list;
#X connect 2 0 22 0;
#X connect 3 0 17 0;
#X connect 6 0 7 0;
#X connect 8 0 19 0;
#X connect 12 0 13 1;
#X connect 13 0 30 0;
#X connect 14 0 3 0;
#X connect 16 0 15 0;
#X connect 17 0 5 0;
#X connect 17 1 13 0;
#X connect 17 2 12 0;
#X connect 17 3 4 0;
#X connect 19 0 18 0;
#X connect 19 1 6 0;
#X connect 19 2 14 0;
#X connect 19 3 16 0;
#X connect 19 4 32 0;
#X connect 20 0 21 0;
#X connect 21 0 23 0;
#X connect 22 0 28 0;
#X connect 23 0 18 0;
#X connect 23 1 6 0;
#X connect 23 2 27 0;
#X connect 23 3 24 0;
#X connect 23 4 32 0;
#X connect 23 5 31 0;
#X connect 24 0 25 0;
#X connect 26 0 27 1;
#X connect 27 0 29 0;
#X connect 28 0 10 0;
#X connect 33 0 26 0;
#X restore 35 505 pd analysis;
#X obj 35 535 bng 15 250 50 0 empty empty Done 17 7 0 12 -262144 -1
-1;
#X obj 66 455 bng 15 250 50 0 empty empty empty 17 7 0 12 -4034 -1
-1;
#X text 56 432 ...OR...;
#N canvas 628 126 444 409 tID-samples 0;
#N canvas 220 224 908 679 load-samples 0;
#X obj 278 199 f;
#X obj 308 199 + 1;
#X msg 296 170 0;
#X obj 674 393 / 5;
#X obj 674 417 i;
#X obj 574 474 pack f f f;
#X obj 607 401 % 5;
#X obj 278 506 soundfiler;
#X obj 674 441 * 50;
#X obj 607 425 * 150;
#X obj 213 137 t b a;
#X obj 159 291 f;
#X obj 159 317 + 1;
#X msg 574 504 \; pd-sample-bank obj \$2 \$3 table tID-sample-\$1;
#X obj 213 108 folder_list;
#X obj 179 36 symbol;
#X obj 179 16 r sample-directory;
#N canvas 10 85 450 300 store-sample-names 0;
#X obj 74 44 inlet;
#X obj 184 44 inlet;
#X obj 119 163 list prepend;
#X obj 207 163 t l;
#X obj 98 191 list;
#X obj 98 213 s sample-name-list;
#X obj 118 106 split_path;
#X obj 188 136 r sample-load-reset;
#X connect 0 0 4 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 2 0 4 1;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 6 1 2 0;
#X connect 7 0 2 1;
#X restore 19 235 pd store-sample-names;
#X msg 29 106 \; pd dsp 1 \;;
#X obj 278 554 list prepend;
#X obj 366 554 t l;
#X obj 257 582 list;
#X obj 257 604 list prepend 0;
#X obj 257 626 s sample-lengths;
#X obj 58 442 s num-samples;
#N canvas 532 140 481 372 resize-samp-lengths 0;
#X obj 108 71 moses 2;
#X obj 59 185 t b;
#X text 63 260 Special case for num-samples==1;
#X obj 108 36 inlet;
#X msg 59 207 \; sample-lengths resize 2 \;;
#X msg 178 121 \; sample-lengths resize \$1 \;;
#X connect 0 0 1 0;
#X connect 0 1 5 0;
#X connect 1 0 4 0;
#X connect 3 0 0 0;
#X restore 222 373 pd resize-samp-lengths;
#N canvas 194 162 710 456 reset-stuff 0;
#X obj 62 37 inlet;
#X obj 201 257 t f b;
#X obj 201 280 until;
#X obj 201 333 f;
#X obj 241 333 + 1;
#X msg 226 308 0;
#X obj 201 227 f;
#X obj 216 201 r num-player-voices;
#X msg 208 158 \; pd dsp 0 \;;
#X msg 31 357 \; pd-sample-bank clear \;;
#X msg 201 355 \; play-\$1 0 -1 \;;
#X obj 63 60 t b b b b;
#X obj 302 136 s sample-load-reset;
#X text 301 263 Turn DSP off then back on later so we don't get complaints
from tabplay~ saying the array disappeared. We also have to set all
the tabplay~ arrays to the dummy (-1) array since that'll be the only
thing that will be guaranteed to exist after the clear.;
#X connect 0 0 11 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 0 10 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 1 0;
#X connect 7 0 6 1;
#X connect 11 0 9 0;
#X connect 11 1 6 0;
#X connect 11 2 8 0;
#X connect 11 3 12 0;
#X restore 327 106 pd reset-stuff;
#X obj 347 529 r sample-load-reset;
#X obj 179 62 t b b a b;
#X obj 296 148 r sample-load-reset;
#X obj 278 450 pack f s f;
#X msg 278 482 read -resize -maxsize \$3 \$2 tID-sample-\$1;
#X text 373 450 set maxsize in [pd init];
#X obj 334 421 r max-sample-length;
#X obj 278 250 t f f f f;
#N canvas 532 140 593 408 rebound-samp-lengths 0;
#X msg 141 148 max;
#X obj 215 142 - 1;
#X obj 108 71 moses 2;
#X msg -37 205 max;
#X obj -37 178 t b;
#X text -27 345 Special case for num-samples==1;
#X obj 108 36 inlet;
#X obj -37 258 max 1;
#X obj 141 201 max 1;
#X obj 189 232 pack f f;
#X msg 189 272 \; sample-lengths bounds 0 \$1 \$2 0 \;;
#X obj 169 101 t b f;
#X msg -37 291 \; sample-lengths bounds 0 \$1 1 0 \; sample-lengths
1 0 \;;
#X obj 141 171 tID/tabletool sample-lengths;
#X obj -37 227 tID/tabletool sample-lengths;
#X connect 0 0 13 0;
#X connect 1 0 9 1;
#X connect 2 0 4 0;
#X connect 2 1 11 0;
#X connect 3 0 14 0;
#X connect 4 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 11 0 0 0;
#X connect 11 1 1 0;
#X connect 13 0 8 0;
#X connect 14 0 7 0;
#X restore 124 410 pd rebound-samp-lengths;
#X obj 159 342 t f f b f;
#X obj 370 624 print sample-length;
#X connect 0 0 1 0;
#X connect 0 0 11 1;
#X connect 0 0 34 0;
#X connect 1 0 0 1;
#X connect 2 0 0 1;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 13 0;
#X connect 6 0 9 0;
#X connect 7 0 19 0;
#X connect 8 0 5 2;
#X connect 9 0 5 1;
#X connect 10 0 0 0;
#X connect 10 1 17 1;
#X connect 10 1 30 1;
#X connect 11 0 12 0;
#X connect 12 0 36 0;
#X connect 14 0 10 0;
#X connect 15 0 28 0;
#X connect 16 0 15 0;
#X connect 19 0 20 0;
#X connect 19 0 21 1;
#X connect 20 0 19 1;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 22 0 37 0;
#X connect 27 0 19 1;
#X connect 28 0 18 0;
#X connect 28 1 11 0;
#X connect 28 1 17 0;
#X connect 28 2 14 0;
#X connect 28 3 26 0;
#X connect 29 0 2 0;
#X connect 30 0 31 0;
#X connect 31 0 7 0;
#X connect 33 0 30 2;
#X connect 34 0 30 0;
#X connect 34 1 5 0;
#X connect 34 2 6 0;
#X connect 34 3 3 0;
#X connect 36 0 24 0;
#X connect 36 1 35 0;
#X connect 36 2 21 0;
#X connect 36 3 25 0;
#X restore 9 22 pd load-samples;
#N canvas 280 208 874 622 sample-bank 0;
#X obj 0 0 table tID-sample-0;
#X restore 9 82 pd sample-bank;
#X obj 9 172 table sample-frames;
#N canvas 775 194 854 716 get-num-frames 0;
#X msg 162 482 max;
#X obj 260 459 - 1;
#X msg 330 432 sum;
#X obj 169 27 r num-samples;
#N canvas 13 88 653 643 get-frame-locations 0;
#X obj 94 13 inlet;
#X obj 324 133 until;
#X obj 324 249 f;
#X obj 364 249 + 1;
#X msg 349 224 0;
#X obj 324 479 tabwrite frame-locations;
#X obj 324 332 until;
#X obj 368 372 f;
#X obj 408 372 + 1;
#X msg 393 347 0;
#X obj 324 302 tabread sample-frames;
#X obj 368 398 t b f;
#X obj 324 432 f;
#X obj 324 272 t f f;
#X msg 64 391 max;
#X obj 64 421 tabletool frame-locations;
#X obj 125 475 - 1;
#X obj 64 530 pack f f;
#X obj 94 59 t b f b;
#X obj 125 455 r num-frames-total;
#X msg 64 553 \; frame-locations bounds 0 \$1 \$2 0 \;;
#X obj 64 443 max 1;
#X obj 125 497 max 1;
#X connect 0 0 18 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 13 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 7 0 11 0;
#X connect 8 0 7 1;
#X connect 9 0 7 1;
#X connect 10 0 6 0;
#X connect 11 0 12 0;
#X connect 11 1 5 1;
#X connect 12 0 5 0;
#X connect 13 0 10 0;
#X connect 13 1 12 1;
#X connect 14 0 15 0;
#X connect 15 0 21 0;
#X connect 16 0 22 0;
#X connect 17 0 20 0;
#X connect 18 0 14 0;
#X connect 18 1 1 0;
#X connect 18 2 4 0;
#X connect 18 2 9 0;
#X connect 19 0 16 0;
#X connect 21 0 17 0;
#X connect 22 0 17 1;
#X restore 25 184 pd get-frame-locations;
#X obj 496 178 moses 2;
#X obj 221 430 moses 2;
#X text 498 337 Special case for num-samples==1;
#N canvas 134 32 1093 751 get-number-of-frames 0;
#X obj 60 60 t f b;
#X obj 60 83 until;
#X obj 60 136 f;
#X obj 100 136 + 1;
#X msg 75 111 0;
#X obj 425 154 tabread sample-lengths;
#X obj 30 384 tabwrite sample-frames;
#X msg 319 451 list tID-sample-\$3 \$2 \$1 \$4 0;
#X obj 60 32 inlet;
#X obj 292 195 until;
#X obj 413 390 r samplerate;
#X obj 410 297 r window-size;
#X obj 319 421 pack f f f f;
#X obj 319 296 f;
#X msg 334 266 0;
#X obj 359 296 +;
#X obj 30 360 f;
#X obj 410 218 >;
#X obj 425 198 -;
#X obj 410 240 select 1;
#X obj 440 176 r window-size;
#X obj 59 331 f;
#X msg 74 301 1;
#X obj 319 552 >=;
#X obj 334 522 r db-thresh;
#X obj 99 331 + 1;
#X obj 319 574 select 1;
#X obj 359 318 t f f;
#X obj 396 73 s get-num-frames-reset;
#X obj 366 266 r get-num-frames-reset;
#X obj 59 256 r get-num-frames-reset;
#X obj 336 102 s get-num-frames-sample-idx;
#X obj 425 131 r get-num-frames-sample-idx;
#X obj 399 366 r get-num-frames-sample-idx;
#X obj 103 356 r get-num-frames-sample-idx;
#X obj 275 34 t b b f b;
#X text 426 326 Traverse the sample and check that each frame is above
our db-thresh \, keeping count of those that are.;
#X msg 30 298 0;
#X text 393 551 disabling db-thresh feature as of examples 0.6.4 \;
This select output used to increment the sample frames counter at left.
;
#X obj 319 494 sigmund~ -t env;
#X obj 301 330 t f f f;
#X obj 464 628 f;
#X text 594 673 not the "get-num-frames-reset" \, because that starts
over on every sample;
#X obj 464 670 list prepend;
#X obj 552 670 t l;
#X obj 533 643 r sample-load-reset;
#X obj 464 692 outlet;
#X connect 0 0 1 0;
#X connect 0 1 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 35 0;
#X connect 3 0 2 1;
#X connect 4 0 2 1;
#X connect 5 0 18 0;
#X connect 7 0 39 0;
#X connect 8 0 0 0;
#X connect 9 0 13 0;
#X connect 10 0 12 3;
#X connect 11 0 12 1;
#X connect 11 0 15 1;
#X connect 12 0 7 0;
#X connect 13 0 40 0;
#X connect 14 0 13 1;
#X connect 15 0 27 0;
#X connect 16 0 6 0;
#X connect 17 0 19 0;
#X connect 18 0 17 1;
#X connect 19 0 9 1;
#X connect 20 0 18 1;
#X connect 21 0 16 1;
#X connect 21 0 25 0;
#X connect 22 0 21 1;
#X connect 23 0 26 0;
#X connect 24 0 23 1;
#X connect 25 0 21 1;
#X connect 26 0 21 0;
#X connect 26 0 41 0;
#X connect 27 0 13 1;
#X connect 27 1 17 0;
#X connect 29 0 14 0;
#X connect 30 0 22 0;
#X connect 30 0 37 0;
#X connect 32 0 5 0;
#X connect 33 0 12 2;
#X connect 34 0 6 1;
#X connect 35 0 16 0;
#X connect 35 1 9 0;
#X connect 35 2 31 0;
#X connect 35 3 28 0;
#X connect 37 0 16 1;
#X connect 39 0 23 0;
#X connect 40 0 12 0;
#X connect 40 1 41 1;
#X connect 40 2 15 0;
#X connect 41 0 43 0;
#X connect 43 0 44 0;
#X connect 43 0 46 0;
#X connect 44 0 43 1;
#X connect 45 0 43 1;
#X restore 270 177 pd get-number-of-frames;
#X obj 161 240 list;
#X obj 161 262 list prepend 0;
#X obj 161 284 s frame-start-samp;
#X obj 169 70 t f b f f f;
#X obj 223 348 t b f b;
#X obj 209 555 pack f f f;
#X msg 209 581 \; sample-frames bounds 0 \$1 \$2 0 \; frame-locations
resize \$3 \; frame-start-samp resize \$3 \; num-frames-total \$3 \;
;
#X msg 544 202 \; sample-frames resize \$1 \;;
#X msg 496 272 \; sample-frames resize 2 \; sample-frames 1 0 \;;
#X obj 330 462 tID/tabletool sample-frames;
#X obj 162 512 tID/tabletool sample-frames;
#X connect 0 0 19 0;
#X connect 1 0 14 1;
#X connect 2 0 18 0;
#X connect 3 0 12 0;
#X connect 5 0 17 0;
#X connect 5 1 16 0;
#X connect 6 0 14 1;
#X connect 6 1 1 0;
#X connect 8 0 9 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 12 0 4 0;
#X connect 12 1 9 0;
#X connect 12 2 13 0;
#X connect 12 3 8 0;
#X connect 12 4 5 0;
#X connect 13 0 0 0;
#X connect 13 1 6 0;
#X connect 13 2 2 0;
#X connect 14 0 15 0;
#X connect 18 0 14 2;
#X connect 19 0 14 0;
#X restore 9 52 pd get-num-frames;
#X obj 9 202 table frame-locations;
#N canvas 412 79 560 268 notes 0;
#X text 52 50 For each sample \, find out how many frames are in it
based on window size \, hop \, and sample length.;
#X text 50 127 Get numFrames for all samples. Sum up all the numFrames
for all samples \, and make a table of that length. That'll be our
lookup table to see which sample houses frame number X when it comes
out of timbreID;
#X text 50 94 numFrames = floor((sampLength-window)/hop);
#X restore 274 253 pd notes;
#X obj 9 142 table sample-lengths;
#X obj 132 82 table tID-sample--1;
#X text 268 82 A dummy table;
#X obj 9 262 table max-values;
#X obj 9 292 table min-values;
#X msg 264 162 \; min-values resize \$1 \; max-values resize \$1 \;
;
#X obj 9 232 table frame-start-samp;
#X obj 264 140 r \$0-feature-length;
#X connect 13 0 11 0;
#X restore 474 481 pd tID-samples;
#X msg 48 290 ../sound/individual-samples/*.wav;
#X obj 32 324 s sample-directory;
#X msg 32 260 ../sound/voice.wav;
#X msg 108 65 4096;
#X msg 31 65 1024;
#X msg 69 65 2048;
#N canvas 188 158 727 377 grain-info 0;
#X obj 60 231 r samplerate;
#X obj 45 253 /;
#X obj 45 31 r current-playback-frame;
#X obj 377 51 r current-playback-sample;
#X obj 377 159 list;
#X obj 398 135 r sample-name-list;
#X obj 377 227 list split 1;
#X obj 377 196 list split;
#X obj 45 124 t f f;
#X obj 170 200 r samplerate;
#X obj 155 223 /;
#X obj 170 150 r window-size;
#X obj 155 173 +;
#X obj 45 274 s grain-info-seconds-start-set;
#X obj 377 257 s grain-info-file-name-set;
#X obj 155 244 s grain-info-seconds-end-set;
#X obj 377 73 t b f f;
#X obj 416 105 s grain-info-sample-number-set;
#X obj 60 57 s grain-info-frame-number-set;
#X obj 45 102 tabread frame-start-samp;
#X connect 0 0 1 1;
#X connect 1 0 13 0;
#X connect 2 0 18 0;
#X connect 2 0 19 0;
#X connect 3 0 16 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 14 0;
#X connect 7 1 6 0;
#X connect 8 0 1 0;
#X connect 8 1 12 0;
#X connect 9 0 10 1;
#X connect 10 0 15 0;
#X connect 11 0 12 1;
#X connect 12 0 10 0;
#X connect 16 0 4 0;
#X connect 16 1 7 1;
#X connect 16 2 17 0;
#X connect 19 0 8 0;
#X restore 474 501 pd grain-info;
#X obj 456 190 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 456 210 openpanel;
#X obj 456 232 split_path;
#X obj 456 340 s sample-directory;
#X msg 456 254 \$1/*.wav;
#X obj 474 287 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 474 307 openpanel;
#X text 88 455 Load a previously-stored analysis file;
#X msg 148 65 8192;
#X text 119 482 Store analysis results to a separate file for later
(add the .timid file extension when you name it).;
#X text 494 286 Single file;
#X obj 32 587 cnv 15 1 1 empty empty 5) 0 0 0 28 -233017 -66577 0;
#X obj 31 32 cnv 15 1 1 empty empty 1) 0 0 0 28 -233017 -66577 0;
#X obj 31 172 cnv 15 1 1 empty empty 3) 0 0 0 28 -233017 -66577 0;
#X text 72 372 Analyze. This will choke Pd for a few seconds;
#X obj 32 378 cnv 15 1 1 empty empty 4) 0 0 0 28 -233017 -66577 0;
#X text 72 17 Set a grain size in samples;
#X text 72 34 (should be a power of 2);
#X text 477 189 Entire folder of .wav files;
#N canvas 84 65 450 288 OPENPANEL-notes 0;
#X msg 83 164 \$1/*.wav;
#X msg 263 164 \$1/*.aiff;
#X text 187 164 or;
#X text 37 31 If you're using [openpanel] to navigate to a single audio
file via the OS's dialog box \, you can simply route its symbol output
to [s sample-directory] as shown here. Loading an entire directory
of audio files is a little different. You can't directly select a directory
using [openpanel]. Instead \, select one of the files in that directory
\, and use [split_path] as shown to grab the directory name. That can
be fed to a message like;
#X text 37 201 in order to load all the .wav or .aiff files in the
directory. There may be a better strategy in the future - tweak this
example as needed.;
#X restore 455 161 pd OPENPANEL-notes;
#X obj 529 225 cnv 15 330 50 empty empty empty 20 12 0 14 -261234 -66577
0;
#X text 541 235 NOTE: this patch now *requires* [folder_list] and [split_path]
from the hcs library in Pd-extended.;
#X obj 282 108 s db-thresh;
#X msg 347 63 70;
#X msg 282 63 0;
#X msg 314 63 40;
#X obj 282 30 cnv 15 1 1 empty empty 2) 0 0 0 28 -233017 -66577 0;
#X text 331 12 Choose a threshold in dB. Grains below this threshold
won't be included in the plot \, which is good when you don't want
to bother plotting gaps of silence.;
#X text 586 162 <<<<< More details on using [openpanel];
#X text 72 156 Provide a path to load a single soundfile or an entire
folder of soundfiles to analyze. The patch will make more sample arrays
for you as needed. Use a wildcard like *.wav to load only wav files
\, for instance. The default maximum length of samples is 1 minute
\, but you can change that in the [pd init] sub-patch at the parent
level. You can also use the [openpanel] buttons at right >>>>>>;
#X text 71 568 Go back to the parent patch \, turn on GEM rendering
\, click "Plot" \, and turn on "Kinect-via-Synapse". Pick different
features for the axes and click "Plot" again as needed.;
#X connect 1 0 3 2;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 3 1;
#X connect 8 0 9 0;
#X connect 10 0 9 0;
#X connect 11 0 0 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 19 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 21 0 18 0;
#X connect 23 0 0 0;
#X connect 38 0 37 0;
#X connect 39 0 37 0;
#X connect 40 0 37 0;
#X restore 194 43 pd analysis;
#X text 279 43 <<<<< START HERE;
#X obj 37 156 tgl 16 0 \$0-render-on render-on-set GEM-render 20 8
0 12 -262144 -1 -1 1 1;
#N canvas 1097 22 545 565 grain-info-display 1;
#X symbolatom 14 35 30 0 0 2 file-name grain-info-file-name-set -;
#X floatatom 14 85 10 0 0 3 start grain-info-seconds-start-set -;
#X floatatom 114 85 10 0 0 3 end grain-info-seconds-end-set -;
#X text 11 66 Location (seconds);
#X floatatom 264 35 10 0 0 2 sample-number grain-info-sample-number-set
-;
#X floatatom 264 85 10 0 0 2 frame-number grain-info-frame-number-set
-;
#N canvas 313 127 916 542 display-bfccs 0;
#X obj 28 138 list;
#X msg 170 116 feature_list \$1;
#X obj 170 136 s \$0-tID;
#X obj 28 190 list split 46;
#X obj 55 235 list prepend 0;
#N canvas 0 22 450 278 (subpatch) 0;
#X array bfcc-display 46 float 0;
#X coords 0 1 45 -1 200 140 1;
#X restore 219 226 graph;
#X obj 28 170 list split 13;
#X msg 491 193 dump_range 13 58;
#X obj 658 337 table min-bfccs 46;
#X obj 658 357 table max-bfccs 46;
#X obj 491 245 list prepend 0;
#X obj 491 267 s min-bfccs;
#X msg 471 309 dump_range 13 58;
#X obj 471 361 list prepend 0;
#X obj 471 383 s max-bfccs;
#X obj 452 68 r update-bfcc-max-min;
#X obj 658 397 table bfcc-tmp 46;
#X obj 55 257 s bfcc-tmp;
#X obj 28 451 list prepend 0;
#X obj 28 473 s bfcc-display;
#X obj 28 212 t b l;
#X obj 28 277 t b b;
#X obj 658 377 table range-bfccs 46;
#X obj 452 460 list prepend 0;
#X obj 452 482 s range-bfccs;
#X msg 55 300 multiply range-bfccs;
#X obj 55 352 list prepend 0;
#X obj 55 374 s bfcc-tmp;
#X msg 28 401 add min-bfccs;
#X msg 452 408 subtract min-bfccs;
#X obj 28 10 r \$0-trig-sound;
#X obj 28 51 t b f;
#X obj 55 322 tID/tabletool bfcc-tmp;
#X obj 28 423 tID/tabletool bfcc-tmp;
#X obj 452 430 tID/tabletool max-bfccs;
#X obj 491 215 tID/tabletool min-values;
#X obj 471 331 tID/tabletool max-values;
#X obj 452 90 t b b b;
#X msg 28 31 \$1;
#X obj 49 114 r feature-list;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 3 0 20 0;
#X connect 4 0 17 0;
#X connect 6 1 3 0;
#X connect 7 0 35 0;
#X connect 10 0 11 0;
#X connect 12 0 36 0;
#X connect 13 0 14 0;
#X connect 15 0 37 0;
#X connect 18 0 19 0;
#X connect 20 0 21 0;
#X connect 20 1 4 0;
#X connect 21 0 28 0;
#X connect 21 1 25 0;
#X connect 23 0 24 0;
#X connect 25 0 32 0;
#X connect 26 0 27 0;
#X connect 28 0 33 0;
#X connect 29 0 34 0;
#X connect 30 0 38 0;
#X connect 31 0 0 0;
#X connect 31 1 1 0;
#X connect 32 1 26 0;
#X connect 33 1 18 0;
#X connect 34 1 23 0;
#X connect 35 1 10 0;
#X connect 36 1 13 0;
#X connect 37 0 29 0;
#X connect 37 1 12 0;
#X connect 37 2 7 0;
#X connect 38 0 31 0;
#X connect 39 0 0 1;
#X coords 0 -1 1 1 240 185 2 200 200;
#X restore 14 355 pd display-bfccs;
#X obj 144 285 grain-info pitch 11;
#X obj 384 145 grain-info flux 5;
#X obj 264 285 grain-info amplitude 12;
#X obj 144 145 grain-info centroid 3;
#X obj 264 145 grain-info flatness 4;
#X obj 14 145 grain-info brightness 2;
#X obj 14 215 grain-info irregularity 6;
#X obj 144 215 grain-info kurtosis 7;
#X obj 264 215 grain-info skewness 8;
#X obj 384 215 grain-info spread 9;
#X obj 14 285 grain-info zero-crossing 10;
#X restore 190 236 pd grain-info-display;
#X text 283 147 <<<<< More mapping options;
#X obj 190 74 hradio 16 1 0 20 \$0-x-mapping x-mapping-set X -16 8
0 12 -262144 -1 -1 11;
#X obj 190 93 hradio 16 1 0 20 \$0-y-mapping y-mapping-set Y -16 8
0 12 -262144 -1 -1 3;
#X obj 190 112 hradio 16 1 1 20 \$0-z-mapping z-mapping-set Z -16 8
0 12 -262144 -1 -1 9;
#X symbolatom 513 74 15 0 0 0 - x-feature-name -;
#X symbolatom 513 93 15 0 0 0 - y-feature-name -;
#X symbolatom 513 112 15 0 0 0 - z-feature-name -;
#N canvas 667 605 550 319 set-colors 0;
#X obj 28 47 hradio 15 1 1 20 \$0-R-mapping R-mapping-set empty 0 -8
0 10 -258113 -1 -1 13;
#X obj 28 67 hradio 15 1 1 20 \$0-G-mapping G-mapping-set empty 0 -8
0 10 -4034 -1 -1 14;
#X obj 28 87 hradio 15 1 1 20 \$0-B-mapping B-mapping-set empty 0 -8
0 10 -4032 -1 -1 15;
#X text 32 25 R G B mapping switches;
#X obj 29 115 bng 15 250 50 0 \$0-render-plot empty Plot 17 7 0 14
-203904 -1 -1;
#N canvas 544 302 1092 518 feature-names 0;
#X obj 455 157 list split 1;
#X obj 455 35 t b f;
#X obj 455 87 list;
#X obj 476 63 r feature-name-list;
#X obj 455 116 list split;
#X obj 616 250 s feature-name-list;
#X obj 616 180 r lb1;
#X obj 265 157 list split 1;
#X obj 265 35 t b f;
#X obj 265 189 s y-feature-name;
#X obj 265 87 list;
#X obj 286 63 r feature-name-list;
#X obj 265 116 list split;
#X obj 75 157 list split 1;
#X obj 75 35 t b f;
#X obj 75 87 list;
#X obj 96 63 r feature-name-list;
#X obj 75 116 list split;
#X obj 75 189 s x-feature-name;
#X obj 455 189 s z-feature-name;
#X obj 455 407 list split 1;
#X obj 455 285 t b f;
#X obj 455 337 list;
#X obj 476 313 r feature-name-list;
#X obj 455 366 list split;
#X obj 265 407 list split 1;
#X obj 265 285 t b f;
#X obj 265 337 list;
#X obj 286 313 r feature-name-list;
#X obj 265 366 list split;
#X obj 75 407 list split 1;
#X obj 75 285 t b f;
#X obj 75 337 list;
#X obj 96 313 r feature-name-list;
#X obj 75 366 list split;
#X obj 75 439 s R-feature-name;
#X obj 265 439 s G-feature-name;
#X obj 455 439 s B-feature-name;
#X msg 616 202 Sample-number Frame-number Brightness Centroid Flatness
Flux Irregularity Kurtosis Skewness Spread Zero-Crossing Pitch Amplitude
BFCC1 BFCC2 BFCC3 BFCC4 BFCC5 BFCC6 BFCC7;
#X obj 75 14 r \$0-x-mapping;
#X obj 265 14 r \$0-y-mapping;
#X obj 455 14 r \$0-z-mapping;
#X obj 75 264 r \$0-R-mapping;
#X obj 265 264 r \$0-G-mapping;
#X obj 455 264 r \$0-B-mapping;
#X connect 0 0 19 0;
#X connect 1 0 2 0;
#X connect 1 1 4 1;
#X connect 2 0 4 0;
#X connect 3 0 2 1;
#X connect 4 1 0 0;
#X connect 6 0 38 0;
#X connect 7 0 9 0;
#X connect 8 0 10 0;
#X connect 8 1 12 1;
#X connect 10 0 12 0;
#X connect 11 0 10 1;
#X connect 12 1 7 0;
#X connect 13 0 18 0;
#X connect 14 0 15 0;
#X connect 14 1 17 1;
#X connect 15 0 17 0;
#X connect 16 0 15 1;
#X connect 17 1 13 0;
#X connect 20 0 37 0;
#X connect 21 0 22 0;
#X connect 21 1 24 1;
#X connect 22 0 24 0;
#X connect 23 0 22 1;
#X connect 24 1 20 0;
#X connect 25 0 36 0;
#X connect 26 0 27 0;
#X connect 26 1 29 1;
#X connect 27 0 29 0;
#X connect 28 0 27 1;
#X connect 29 1 25 0;
#X connect 30 0 35 0;
#X connect 31 0 32 0;
#X connect 31 1 34 1;
#X connect 32 0 34 0;
#X connect 33 0 32 1;
#X connect 34 1 30 0;
#X connect 38 0 5 0;
#X connect 39 0 14 0;
#X connect 40 0 8 0;
#X connect 41 0 1 0;
#X connect 42 0 31 0;
#X connect 43 0 26 0;
#X connect 44 0 21 0;
#X restore 375 202 pd feature-names;
#X symbolatom 356 47 15 0 0 0 - R-feature-name -;
#X symbolatom 356 67 15 0 0 0 - G-feature-name -;
#X symbolatom 356 87 15 0 0 0 - B-feature-name -;
#N canvas 984 179 390 498 feature-parsing 0;
#X obj 30 198 list split 1;
#X obj 30 178 list split;
#X obj 10 281 list split 1;
#X obj 10 261 list split;
#X obj -10 363 list split 1;
#X obj -9 342 list split;
#X obj 211 134 list split 1;
#X obj 211 114 list split;
#X obj 191 218 list split 1;
#X obj 191 198 list split;
#X obj 172 296 list split 1;
#X obj 172 276 list split;
#X obj -9 36 t l l;
#X obj -9 85 t l l l;
#X obj 172 90 t l l l;
#X obj 239 366 pack f f f;
#N canvas 1394 645 155 250 scale-z 0;
#X obj 18 17 inlet;
#X obj 60 88 / 2;
#X obj 33 64 t f f;
#X obj 18 90 *;
#X obj 18 117 -;
#X obj 18 163 -;
#X obj 33 141 r z-offset;
#X obj 33 43 r \$0-z-range;
#X obj 18 185 outlet;
#X connect 0 0 3 0;
#X connect 1 0 4 1;
#X connect 2 0 3 1;
#X connect 2 1 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 7 0 2 0;
#X restore 30 218 pd scale-z;
#N canvas 1266 88 313 342 scale-x 0;
#X obj 36 30 inlet;
#X obj 68 175 / 2;
#X obj 54 87 t f f;
#X obj 36 138 *;
#X obj 36 203 -;
#X obj 36 252 -;
#X obj 54 228 r x-offset;
#X obj 54 66 r \$0-x-range;
#X obj 36 274 outlet;
#X connect 0 0 3 0;
#X connect 1 0 4 1;
#X connect 2 0 3 1;
#X connect 2 1 1 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 7 0 2 0;
#X restore -10 384 pd scale-x;
#N canvas 1027 225 313 342 scale-y 0;
#X obj 36 30 inlet;
#X obj 51 228 r y-offset;
#X obj 78 172 / 2;
#X obj 51 114 t f f;
#X obj 36 138 *;
#X obj 36 203 -;
#X obj 36 252 -;
#X obj 51 93 r \$0-y-range;
#X obj 36 274 outlet;
#X connect 0 0 4 0;
#X connect 1 0 6 1;
#X connect 2 0 5 1;
#X connect 3 0 4 1;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 8 0;
#X connect 7 0 3 0;
#X restore 10 301 pd scale-y;
#X obj 239 388 s \$0-coord-RGB;
#X obj 48 322 r \$0-x-mapping;
#X obj 87 158 r \$0-z-mapping;
#X obj 268 94 r \$0-B-mapping;
#X obj 248 178 r \$0-G-mapping;
#X obj 229 255 r \$0-R-mapping;
#X obj 67 241 r \$0-y-mapping;
#X obj -9 14 r feature-list;
#X obj 85 447 s \$0-coord-XYZ;
#X obj 85 424 pack f f f;
#X connect 0 0 16 0;
#X connect 1 1 0 0;
#X connect 2 0 18 0;
#X connect 3 1 2 0;
#X connect 4 0 17 0;
#X connect 5 1 4 0;
#X connect 6 0 15 2;
#X connect 7 1 6 0;
#X connect 8 0 15 1;
#X connect 9 1 8 0;
#X connect 10 0 15 0;
#X connect 11 1 10 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 5 0;
#X connect 13 1 3 0;
#X connect 13 2 1 0;
#X connect 14 0 11 0;
#X connect 14 1 9 0;
#X connect 14 2 7 0;
#X connect 15 0 19 0;
#X connect 16 0 28 2;
#X connect 17 0 28 0;
#X connect 18 0 28 1;
#X connect 20 0 5 1;
#X connect 21 0 1 1;
#X connect 22 0 7 1;
#X connect 23 0 9 1;
#X connect 24 0 11 1;
#X connect 25 0 3 1;
#X connect 26 0 12 0;
#X connect 28 0 27 0;
#X restore 375 182 pd feature-parsing;
#X text 25 141 Features used here are:;
#X text 25 171 0: sample number;
#X text 25 191 1: frame number;
#X text 25 211 2: brightness;
#X text 25 231 3: centroid;
#X text 25 251 4: flatness;
#X text 25 271 5: flux;
#X text 25 291 6: irregularity;
#X text 185 171 7: kurtosis;
#X text 185 191 8: skewness;
#X text 185 211 9: spread;
#X text 185 231 10: zero crossing;
#X text 185 251 11: pitch;
#X text 185 271 12: amplitude;
#X text 185 291 13-58: BFCCs 1-46 (we dropped BFCC 0);
#X obj -9 1 cnv 10 400 10 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj -9 1 cnv 10 10 400 empty empty empty 20 12 0 14 -233017 -66577
0;
#X restore 190 147 pd set-colors;
#X text 35 372 timbreID - William Brent 2012;
#X text 35 386 Kinect Grain Space Naviagtion â€“ Max Neupert 2012;
#X obj 37 194 bng 16 250 50 0 \$0-reset-axes empty Reset 20 8 0 12
-204786 -1 -1;
#X obj 39 294 hsl 128 16 0 1 0 0 \$0-headdistance empty head-distance/zoom
2 8 0 12 -262144 -1 -1 5500 0;
#X obj 39 313 hsl 128 16 -15 15 0 0 \$0-handdistance empty hand-distance
2 8 0 12 -262144 -1 -1 10800 0;
#X obj 190 169 tgl 16 0 \$0-continuous \$0-continuous-set continuous-playback
20 8 0 12 -262144 -1 -1 1 1;
#X obj 486 297 nbx 5 14 1 60 0 0 \$0-framerate \$0-framerate-set framerate
0 -8 0 10 -262144 -1 -1 25 256;
#X obj 272 295 nbx 4 14 1 20 0 0 \$0-zoom-control-x-range zoom-control-x-range-set
zoom-x 50 8 0 10 -262144 -1 -1 10.1333 256;
#X obj 272 312 nbx 4 14 1 20 0 0 \$0-zoom-control-y-range zoom-control-y-range-set
zoom-y 50 8 0 10 -262144 -1 -1 7.6 256;
#X obj 272 329 nbx 4 14 1 20 0 0 \$0-zoom-control-z-range zoom-control-z-range-set
zoom-z 50 8 0 10 -262144 -1 -1 7.6 256;
#X obj 370 295 nbx 4 14 -20 20 0 0 \$0-zoom-control-x-offset zoom-control-x-offset-set
offset-x 50 8 0 10 -262144 -1 -1 0 256;
#X obj 370 331 nbx 4 14 -20 20 0 0 \$0-zoom-control-z-offset zoom-control-z-offset-set
offset-z 50 8 0 10 -262144 -1 -1 0 256;
#X obj 370 313 nbx 4 14 -20 20 0 0 \$0-zoom-control-y-offset zoom-control-y-offset-set
offset-y 50 8 0 10 -262144 -1 -1 0 256;
#X obj 45 231 tgl 8 0 \$0-lefthand \$0-lefthand-set Left-handed 13
4 0 9 -262144 -1 -1 1 1;
#N canvas 673 711 275 241 gem-viz 0;
#X msg -69 49 pd~ stop;
#X obj -88 127 pd~ -sr 41100 -noutsig 0 -fifo 20;
#N canvas 89 62 1128 906 receives 0;
#X obj 39 820 outlet;
#X obj 467 624 r \$0-render-plot;
#X obj 354 18 r \$0-reset-axes;
#X obj 346 621 r \$0-kinect-on;
#X msg 346 647 kinect-on \$1;
#X obj 316 570 r \$0-mouse-radius;
#X msg 316 596 mouse-radius \$1;
#X obj 295 520 r \$0-point-size;
#X msg 295 546 point-size \$1;
#X obj 279 470 r \$0-headdistance;
#X msg 279 496 headdistance \$1;
#X obj 259 419 r \$0-handdistance;
#X msg 259 445 handdistance \$1;
#X msg 234 389 zoom-control-x-range \$1;
#X obj 234 363 r \$0-zoom-control-x-range;
#X msg 204 332 zoom-control-x-range \$1;
#X obj 204 306 r \$0-zoom-control-x-range;
#X obj 179 256 r \$0-zoom-control-y-range;
#X msg 179 282 zoom-control-y-range \$1;
#X obj 157 203 r \$0-zoom-control-z-range;
#X msg 157 229 zoom-control-z-range \$1;
#X obj 132 149 r \$0-framerate;
#X msg 132 175 framerate \$1;
#X msg 354 41 \; zoom-control-x-range-set 10.1333 \; zoom-control-y-range-set
7.6 \; zoom-control-z-range-set 7.6 \; zoom-control-x-offset-set 0
\; zoom-control-y-offset-set 0 \; zoom-control-z-offset-set 0 \;;
#X obj 100 97 r \$0-continuous;
#X msg 100 123 continuous \$1;
#X obj 513 650 r num-frames-total;
#X msg 507 724 num-frames-total \$1;
#X obj 79 47 r \$0-coord-RGB;
#X msg 79 69 coord-RGB \$1 \$2 \$3;
#X msg 375 682 render-plot bang;
#X obj 45 -1 r \$0-framerate;
#X msg 45 25 framerate \$1;
#X text 750 9 this subpatch contains the local and non local receives
that will be transmitted into the Gem instance;
#X text 750 46 inside the Pd~ process these will values will be automatically
available with global receives.;
#X obj 502 752 r \$0-coord-XYZ;
#X msg 502 774 coord-XYZ \$1 \$2 \$3;
#X obj 507 700 f;
#X obj 513 672 t b f;
#X obj 467 647 t b b;
#X obj 508 798 r \$0-lefthand;
#X msg 508 824 lefthand \$1;
#X obj 508 849 r \$0-manualmode;
#X msg 508 871 manualmode \$1 \$2 \$3;
#X connect 1 0 39 0;
#X connect 2 0 23 0;
#X connect 3 0 4 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 0 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 9 0 10 0;
#X connect 10 0 0 0;
#X connect 11 0 12 0;
#X connect 12 0 0 0;
#X connect 13 0 0 0;
#X connect 14 0 13 0;
#X connect 15 0 0 0;
#X connect 16 0 15 0;
#X connect 17 0 18 0;
#X connect 18 0 0 0;
#X connect 19 0 20 0;
#X connect 20 0 0 0;
#X connect 21 0 22 0;
#X connect 22 0 0 0;
#X connect 24 0 25 0;
#X connect 25 0 0 0;
#X connect 26 0 38 0;
#X connect 27 0 0 0;
#X connect 28 0 29 0;
#X connect 29 0 0 0;
#X connect 30 0 0 0;
#X connect 31 0 32 0;
#X connect 32 0 0 0;
#X connect 35 0 36 0;
#X connect 36 0 0 0;
#X connect 37 0 27 0;
#X connect 38 0 37 0;
#X connect 38 1 37 1;
#X connect 39 0 30 0;
#X connect 39 1 37 0;
#X connect 40 0 41 0;
#X connect 41 0 0 0;
#X connect 42 0 43 0;
#X connect 43 0 0 0;
#X restore -53 81 pd receives;
#X obj -88 -38 r \$0-render-on;
#X obj -88 -11 sel 1 0;
#N canvas 943 523 638 301 sends 0;
#X obj 25 19 inlet;
#X obj 25 178 s \$0-tID;
#X obj 83 177 s \$0-trig-sound;
#X obj 140 155 s \$0-framerate-set;
#X obj 25 54 route tID trig-sound framerate-set x-range y-range z-range
;
#X obj 197 133 s \$0-x-range;
#X obj 255 111 s \$0-y-range;
#X obj 312 91 s \$0-z-range;
#X text 101 7 messages from inside the pd~ process get converted into
local variables for the main instance here;
#X connect 0 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 4 2 3 0;
#X connect 4 3 5 0;
#X connect 4 4 6 0;
#X connect 4 5 7 0;
#X restore -88 167 pd sends;
#X obj -33 105 print sendingToPdTilde;
#X obj -32 152 print receivingFromPdTilde;
#X msg -88 21 pd~ start -lib Gem gem-process.pd;
#X text -14 2 try -nogui;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 0 7 0;
#X connect 2 0 1 0;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 4 1 0 0;
#X connect 8 0 1 0;
#X restore 36 105 pd gem-viz;
#N canvas 655 555 450 300 manual-mode 0;
#X text 39 19 if you don't have a kinect connected you may try to navigate
with these controls:;
#X obj 40 60 hsl 128 15 -1 11 0 0 empty empty x -2 -8 0 10 -262144
-1 -1 5500 1;
#X obj 39 264 s \$0-manualmode;
#X obj 39 240 pack f f f;
#X obj 170 62 vsl 15 128 -10 2 0 0 empty empty y 0 -9 0 10 -262144
-1 -1 6000 1;
#X obj 58 217 t b f;
#X obj 40 177 hsl 128 15 10 22 0 0 empty empty z -2 -8 0 10 -262144
-1 -1 6300 1;
#X obj 101 219 t b f;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 5 1 3 1;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X connect 7 1 3 2;
#X restore 190 213 pd manual-mode;
#X text 285 212 <<<<< Manual control w/o kinect;
#X text 318 251;
#X text 328 235 <<<<< Grain info on touch;
